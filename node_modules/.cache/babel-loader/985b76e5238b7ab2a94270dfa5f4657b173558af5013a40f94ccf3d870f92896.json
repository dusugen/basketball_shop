{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst initialState = {\n  totalPrice: 0,\n  items: []\n};\nconst getSum = items => {\n  const totalPrice = items.reduce((sum, obj) => {\n    return sum + obj.price * obj.count;\n  }, 0);\n  return totalPrice;\n};\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    addItem(state, action) {\n      const findItem = state.items.find(obj => {\n        return obj.id === action.payload.id && obj.size === action.payload.size && obj.type === action.payload.type;\n      });\n      findItem ? findItem.count++ : state.items.push({\n        ...action.payload,\n        count: 1\n      });\n      state.totalPrice = getSum(state.items);\n    },\n    minusItem(state, action) {\n      const findItem = state.items.find(obj => obj.id === action.payload.id && obj.size === action.payload.size && obj.type === action.payload.type);\n      if (findItem && findItem.count > 0) {\n        findItem.count--;\n      }\n      if (findItem.count === 0) {\n        state.items = state.items.filter(obj => {\n          return !(obj.type === action.payload.type && obj.size === action.payload.size && obj.id === action.payload.id);\n        });\n      }\n      state.totalPrice = getSum(state.items);\n    },\n    plusItem(state, action) {\n      const findItem = state.items.find(obj => obj.id === action.payload.id && obj.size === action.payload.size && obj.type === action.payload.type);\n      if (findItem) {\n        findItem.count++;\n      }\n      state.totalPrice = getSum(state.items);\n    },\n    removeItem(state, action) {\n      state.items = state.items.filter(obj => {\n        return !(obj.type === action.payload.type && obj.size === action.payload.size && obj.id === action.payload.id);\n      });\n      state.totalPrice = getSum(state.items);\n    },\n    clearItems(state) {\n      state.items = [];\n      state.totalPrice = getSum(state.items);\n    }\n  }\n});\nexport const selectCart = state => state.cart;\nexport const {\n  addItem,\n  removeItem,\n  clearItems,\n  minusItem,\n  plusItem\n} = cartSlice.actions; // reducers = action так называется в объекте.\n\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","initialState","totalPrice","items","getSum","reduce","sum","obj","price","count","cartSlice","name","reducers","addItem","state","action","findItem","find","id","payload","size","type","push","minusItem","filter","plusItem","removeItem","clearItems","selectCart","cart","actions","reducer"],"sources":["/home/dusugen/react-pizza/src/redux/slices/cartSlice.ts"],"sourcesContent":["import {createSlice} from \"@reduxjs/toolkit\";\n\nconst initialState = {\n  totalPrice: 0,\n  items: [],\n}\n\nconst getSum = (items) => {\n  const totalPrice = items.reduce((sum, obj) => {\n    return sum + (obj.price * obj.count)\n  }, 0)\n  return totalPrice;\n}\n\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    addItem(state, action) {\n      const findItem = state.items.find((obj) => {\n        return (obj.id === action.payload.id && obj.size === action.payload.size && obj.type === action.payload.type)\n      });\n      (findItem) ? findItem.count++ : state.items.push({...action.payload, count: 1});\n\n      state.totalPrice = getSum(state.items)\n    },\n    minusItem(state, action) {\n      const findItem = state.items.find(obj =>\n        (obj.id === action.payload.id && obj.size === action.payload.size && obj.type === action.payload.type));\n\n      if (findItem && findItem.count > 0) {\n        findItem.count--;\n      }\n\n      if (findItem.count === 0) {\n        state.items = state.items.filter((obj) => {\n          return !(obj.type === action.payload.type && obj.size === action.payload.size && obj.id === action.payload.id)\n        })\n      }\n\n      state.totalPrice = getSum(state.items);\n    },\n    plusItem(state, action) {\n      const findItem = state.items.find(obj => ((obj.id === action.payload.id && obj.size === action.payload.size && obj.type === action.payload.type)));\n      if (findItem) {\n        findItem.count++;\n      }\n      state.totalPrice = getSum(state.items);\n    }\n    ,\n    removeItem(state, action) {\n      state.items = state.items.filter(obj => {\n        return !(obj.type === action.payload.type && obj.size === action.payload.size && obj.id === action.payload.id);\n      });\n      state.totalPrice = getSum(state.items);\n    }\n    ,\n    clearItems(state) {\n      state.items = [];\n      state.totalPrice = getSum(state.items)\n    }\n  }\n})\n\nexport const selectCart = (state) => state.cart;\n\nexport const {addItem, removeItem, clearItems, minusItem, plusItem} = cartSlice.actions   // reducers = action так называется в объекте.\n\nexport default cartSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}